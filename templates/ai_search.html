{% extends "base.html" %}
{% block title %}AI Búsqueda{% endblock %}
{% block content %}
<h1>AI Búsqueda</h1>

<form method="get" action="{{ url_for('ai_search') }}" class="admin-form" style="margin:8px 0">
  <input name="q" value="{{ q }}" placeholder="¿Qué buscas?" style="min-width:280px">
  <input name="cat" value="{{ cat }}" placeholder="categoría (ej: tcg)">
  <input name="tipo" value="{{ tipo }}" placeholder="tipo (ej: cartas)">
  <button class="btn">Buscar</button>
</form>

{% if q and not products %}
  <p class="muted">Sin resultados para “{{ q }}”.</p>
{% endif %}

<div class="grid">
  {% for p in products %}
  <div class="card">
    {% if p.image_url %}
      <img src="{{ p.image_url }}" alt="{{ p.nombre }}" style="width:100%;height:160px;object-fit:cover;border-radius:8px;border:1px solid #2a3670;margin-bottom:8px">
    {% endif %}
    <div class="title">{{ p.nombre }}</div>
    <div class="muted">{{ p.tipo }} · {{ p.categoria }}</div>
    <div class="muted">${{ "%.2f"|format(p.precio_base) }}</div>
    <p style="margin-top:6px"><a class="btn" href="{{ url_for('product_detail', pid=p.id) }}">Ver</a></p>
  </div>
  {% endfor %}
</div>
{% endblock %}