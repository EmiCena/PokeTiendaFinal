{% extends "base.html" %}
{% block title %}Carrito &middot; PokeShop{% endblock %}
{% block content %}
<h1>Carrito</h1>

<form action="{{ url_for('cart_update') }}" method="post">
<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
<table class="table">
  <tr><th>Producto</th><th>Precio</th><th>Cantidad</th><th>Subtotal</th></tr>
  {% for it in items %}
  <tr>
    <td>{{ it.product.nombre }}</td>
    <td>$ {{ "%.2f"|format(it.unit_price) }}</td>
    <td><input type="number" name="qty_{{ it.product.id }}" min="0" max="99" value="{{ it.qty }}"></td>
    <td>$ {{ "%.2f"|format(it.unit_price * it.qty) }}</td>
  </tr>
  {% endfor %}
</table>
<div class="row">
  <div class="total">Total: <b>$ {{ "%.2f"|format(total) }}</b></div>
  <div class="right">
    <button class="btn" type="submit">Actualizar</button>
  </div>
</div>
</form>

<form action="{{ url_for('cart_clear') }}" method="post" style="margin-top:8px">
  <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
  <button class="btn danger">Vaciar</button>
  <a class="btn primary" href="{{ url_for('checkout') }}">Ir a pagar</a>
</form>
{% endblock %}

