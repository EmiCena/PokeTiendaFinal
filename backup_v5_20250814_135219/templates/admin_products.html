{% extends "base.html" %}
{% block title %}Admin · Productos{% endblock %}
{% block content %}
<h1>Admin · Productos</h1>
<form method="post" class="admin-form" enctype="multipart/form-data">
  <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
  <input name="nombre" placeholder="Nombre" required>
  <input name="tipo" placeholder="Tipo (fuego/agua/...)" required>
  <label>Categoría
    <select name="categoria">
      <option value="general">General/Merch</option>
      <option value="tcg">TCG</option>
    </select>
  </label>
  <input name="precio" type="number" step="0.01" placeholder="Precio base" required>
  <input name="stock" type="number" placeholder="Stock" required>
  <input name="image_url" placeholder="URL de imagen">
  <label>Imagen (archivo) <input type="file" name="image_file" accept=".png,.jpg,.jpeg,.gif,.webp"></label>
  <textarea name="descripcion" placeholder="Descripción"></textarea>
  <button class="btn primary">Crear</button>
</form>

<h3>Listado</h3>
<div class="grid">
  {% for p in products %}
  <div class="card">
    <img src="{{ p.image_url }}" alt="{{ p.nombre }}">
    <div class="title">{{ p.nombre }}</div>
    <div class="muted">{{ p.tipo|capitalize }} · {{ p.categoria|capitalize }} · Stock {{ p.stock }}</div>
    <div class="price">$ {{ "%.2f"|format(p.precio_base) }}</div>
  </div>
  {% endfor %}
</div>
{% endblock %}
